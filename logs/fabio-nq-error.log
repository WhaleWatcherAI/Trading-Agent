DEBUG: main() function called
DEBUG: About to print header
[OpenAI] Reasoner attempt 1 failed: Reasoner returned empty response
[OpenAI] Retrying reasoner with alternate delivery (non-stream).
[OpenAI] Reasoner attempt 1 failed: terminated
[OpenAI] Retrying reasoner with alternate delivery (non-stream).
[OpenAI] Reasoner attempt 2 failed: Reasoner returned empty response
[OpenAI] Retrying reasoner with alternate delivery (non-stream).
[OpenAI] Reasoner attempt 3 failed: Reasoner returned empty response
[OpenAI] All reasoner attempts failed. Falling back to deepseek-chat/GPT-4...
[OpenAI] Reasoner attempt 2 failed: Reasoner returned empty response
[OpenAI] Retrying reasoner with alternate delivery (non-stream).
[ExecutionManager] ‚ö†Ô∏è Short stop override invalid (25082.50 <= entry 25194.25). Resetting to default.
[ExecutionManager] ‚ö†Ô∏è Short stop override invalid (25082.50 <= entry 25194.25). Resetting to default.
[2025-11-26T05:24:34.779Z] Error: A callback for the method 'gatewayuserorder' threw error 'TypeError: import_tradingDatabase.tradingDB.getLastPendingDecision is not a function'.
[ExecutionManager] üîí Protection lock active for 6s to prevent early bracket cancels/adjusts.
[AdjustTrace adj-1764134676285] start newStop=25082.5 newTarget=25025 version=n/a
[ExecutionManager] ‚ö†Ô∏è Positions API returned empty; inferring position exists from memory and protective orders.
[AdjustTrace adj-1764134676285] stop/target need update flags {
  stopNeedsUpdate: true,
  targetNeedsUpdate: true,
  tickSize: 0.25,
  currentStop: 25218.75,
  requestedStop: 25082.5,
  currentTarget: 25024.5,
  requestedTarget: 25025
}
[ExecutionManager] üõë SHORT trail skipped: newStop 25082.50 is < current 25194.25 (wrong side)
[ExecutionManager] ‚è≥ Target modify skipped: change < 3 ticks.
[ExecutionManager] ‚ùå Bracket adjustment FAILED - no updates were applied
[OpenAI] Reasoner attempt 1 failed: Reasoner returned empty response
[OpenAI] Retrying reasoner with alternate delivery (non-stream).
[RiskMgmt] Failed to parse risk management response: profitLossTicks is not defined
[RiskMgmt] ‚ùå Error analyzing position risk: profitLossTicks is not defined | Position: short @ 25194.25
[RiskMgmt] Stack trace: ReferenceError: profitLossTicks is not defined
    at parseRiskManagementResponse (/Users/coreycosta/trading-agent/lib/riskManagementAgent.ts:715:35)
    at analyzePositionRisk (/Users/coreycosta/trading-agent/lib/riskManagementAgent.ts:555:22)
    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)
    at async processMarketUpdate (/Users/coreycosta/trading-agent/live-fabio-agent-playbook.ts:1407:32)
[RiskMgmt] Failed to parse risk management response: profitLossTicks is not defined
[RiskMgmt] ‚ùå Error analyzing position risk: profitLossTicks is not defined | Position: short @ 25194.25
[RiskMgmt] Stack trace: ReferenceError: profitLossTicks is not defined
    at parseRiskManagementResponse (/Users/coreycosta/trading-agent/lib/riskManagementAgent.ts:715:35)
    at analyzePositionRisk (/Users/coreycosta/trading-agent/lib/riskManagementAgent.ts:555:22)
    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)
    at async processMarketUpdate (/Users/coreycosta/trading-agent/live-fabio-agent-playbook.ts:1571:32)
[RiskMgmt] Failed to parse risk management response: profitLossTicks is not defined
[RiskMgmt] ‚ùå Error analyzing position risk: profitLossTicks is not defined | Position: short @ 25194.25
[RiskMgmt] Stack trace: ReferenceError: profitLossTicks is not defined
    at parseRiskManagementResponse (/Users/coreycosta/trading-agent/lib/riskManagementAgent.ts:715:35)
    at analyzePositionRisk (/Users/coreycosta/trading-agent/lib/riskManagementAgent.ts:555:22)
    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)
    at async processMarketUpdate (/Users/coreycosta/trading-agent/live-fabio-agent-playbook.ts:1571:32)
[OpenAI] Reasoner attempt 3 failed: Reasoner returned empty response
[OpenAI] All reasoner attempts failed. Falling back to deepseek-chat/GPT-4...
[RiskMgmt] Failed to parse risk management response: profitLossTicks is not defined
[RiskMgmt] ‚ùå Error analyzing position risk: profitLossTicks is not defined | Position: short @ 25194.25
[RiskMgmt] Stack trace: ReferenceError: profitLossTicks is not defined
    at parseRiskManagementResponse (/Users/coreycosta/trading-agent/lib/riskManagementAgent.ts:715:35)
    at analyzePositionRisk (/Users/coreycosta/trading-agent/lib/riskManagementAgent.ts:555:22)
    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)
    at async processMarketUpdate (/Users/coreycosta/trading-agent/live-fabio-agent-playbook.ts:1571:32)
[OpenAI] Reasoner attempt 1 failed: terminated
[OpenAI] Retrying reasoner with alternate delivery (non-stream).
[RiskMgmt] Failed to parse risk management response: profitLossTicks is not defined
[RiskMgmt] ‚ùå Error analyzing position risk: profitLossTicks is not defined | Position: short @ 25194.25
[RiskMgmt] Stack trace: ReferenceError: profitLossTicks is not defined
    at parseRiskManagementResponse (/Users/coreycosta/trading-agent/lib/riskManagementAgent.ts:715:35)
    at analyzePositionRisk (/Users/coreycosta/trading-agent/lib/riskManagementAgent.ts:555:22)
    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)
    at async processMarketUpdate (/Users/coreycosta/trading-agent/live-fabio-agent-playbook.ts:1571:32)
[OpenAI] Reasoner attempt 2 failed: Reasoner returned empty response
[OpenAI] Retrying reasoner with alternate delivery (non-stream).
[RiskMgmt] Failed to parse risk management response: profitLossTicks is not defined
[RiskMgmt] ‚ùå Error analyzing position risk: profitLossTicks is not defined | Position: short @ 25194.25
[RiskMgmt] Stack trace: ReferenceError: profitLossTicks is not defined
    at parseRiskManagementResponse (/Users/coreycosta/trading-agent/lib/riskManagementAgent.ts:715:35)
    at analyzePositionRisk (/Users/coreycosta/trading-agent/lib/riskManagementAgent.ts:555:22)
    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)
    at async processMarketUpdate (/Users/coreycosta/trading-agent/live-fabio-agent-playbook.ts:1571:32)
[RiskMgmt] Failed to parse risk management response: profitLossTicks is not defined
[RiskMgmt] ‚ùå Error analyzing position risk: profitLossTicks is not defined | Position: short @ 25194.25
[RiskMgmt] Stack trace: ReferenceError: profitLossTicks is not defined
    at parseRiskManagementResponse (/Users/coreycosta/trading-agent/lib/riskManagementAgent.ts:715:35)
    at analyzePositionRisk (/Users/coreycosta/trading-agent/lib/riskManagementAgent.ts:555:22)
    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)
    at async processMarketUpdate (/Users/coreycosta/trading-agent/live-fabio-agent-playbook.ts:1571:32)
[RiskMgmt] Failed to parse risk management response: profitLossTicks is not defined
[RiskMgmt] ‚ùå Error analyzing position risk: profitLossTicks is not defined | Position: short @ 25194.25
[RiskMgmt] Stack trace: ReferenceError: profitLossTicks is not defined
    at parseRiskManagementResponse (/Users/coreycosta/trading-agent/lib/riskManagementAgent.ts:715:35)
    at analyzePositionRisk (/Users/coreycosta/trading-agent/lib/riskManagementAgent.ts:555:22)
    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)
    at async processMarketUpdate (/Users/coreycosta/trading-agent/live-fabio-agent-playbook.ts:1571:32)
[OpenAI] Reasoner attempt 3 failed: Reasoner returned empty response
[OpenAI] All reasoner attempts failed. Falling back to deepseek-chat/GPT-4...
[OpenAI] Reasoner attempt 2 failed: Reasoner returned empty response
[OpenAI] Retrying reasoner with alternate delivery (non-stream).
[RiskMgmt] Failed to parse risk management response: profitLossTicks is not defined
[RiskMgmt] ‚ùå Error analyzing position risk: profitLossTicks is not defined | Position: short @ 25194.25
[RiskMgmt] Stack trace: ReferenceError: profitLossTicks is not defined
    at parseRiskManagementResponse (/Users/coreycosta/trading-agent/lib/riskManagementAgent.ts:715:35)
    at analyzePositionRisk (/Users/coreycosta/trading-agent/lib/riskManagementAgent.ts:555:22)
    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)
    at async processMarketUpdate (/Users/coreycosta/trading-agent/live-fabio-agent-playbook.ts:1571:32)
[RiskMgmt] Failed to parse risk management response: profitLossTicks is not defined
[RiskMgmt] ‚ùå Error analyzing position risk: profitLossTicks is not defined | Position: short @ 25194.25
[RiskMgmt] Stack trace: ReferenceError: profitLossTicks is not defined
    at parseRiskManagementResponse (/Users/coreycosta/trading-agent/lib/riskManagementAgent.ts:715:35)
    at analyzePositionRisk (/Users/coreycosta/trading-agent/lib/riskManagementAgent.ts:555:22)
    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)
    at async processMarketUpdate (/Users/coreycosta/trading-agent/live-fabio-agent-playbook.ts:1571:32)
[RiskMgmt] Failed to parse risk management response: profitLossTicks is not defined
[RiskMgmt] ‚ùå Error analyzing position risk: profitLossTicks is not defined | Position: short @ 25194.25
[RiskMgmt] Stack trace: ReferenceError: profitLossTicks is not defined
    at parseRiskManagementResponse (/Users/coreycosta/trading-agent/lib/riskManagementAgent.ts:715:35)
    at analyzePositionRisk (/Users/coreycosta/trading-agent/lib/riskManagementAgent.ts:555:22)
    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)
    at async processMarketUpdate (/Users/coreycosta/trading-agent/live-fabio-agent-playbook.ts:1571:32)
[OpenAI] Reasoner attempt 3 failed: Reasoner returned empty response
[OpenAI] All reasoner attempts failed. Falling back to deepseek-chat/GPT-4...
