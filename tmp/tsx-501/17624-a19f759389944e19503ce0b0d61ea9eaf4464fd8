{"code":"__filename=\"/Users/coreycosta/trading-agent/run-live-crypto-mean-reversion.ts\";(()=>{\n\"use strict\";var __defProp=Object.defineProperty;var __name=(target,value)=>__defProp(target,\"name\",{value,configurable:true});var import_config=require(\"dotenv/config\");var import_crypto=require(\"crypto\");var import_alpaca=require(\"./lib/alpaca\");var import_meanReversionAgent=require(\"./lib/meanReversionAgent\");var import_coinbaseWebSocket=require(\"./lib/coinbaseWebSocket\");process.env.BYPASS_GEX=\"true\";const CONFIG={symbols:{\"SOL-USD\":\"SOLUSD\"},shareQuantity:Number(process.env.CRYPTO_QTY||\"1\"),pollIntervalMs:Number(process.env.CRYPTO_POLL_MS||\"15000\"),maxSpreadPct:Number(process.env.CRYPTO_MAX_SPREAD_PCT||\"0.005\"),walkRetries:Number(process.env.CRYPTO_WALK_RETRIES||\"3\"),walkIncrementPct:Number(process.env.CRYPTO_WALK_INCREMENT_PCT||\"0.001\"),walkTimeoutMs:Number(process.env.CRYPTO_WALK_TIMEOUT_MS||\"5000\"),marketFallback:process.env.CRYPTO_MARKET_FALLBACK!==\"false\",rsiPeriod:14,rsiOversold:30,rsiOverbought:70,bbPeriod:20,bbStdDev:2,bbThreshold:.005,stopLossPercent:.01};const trades=new Map;const lastProcessed15mBar=new Map;const coinbaseSymbols=Object.keys(CONFIG.symbols);const coinbaseWS=new import_coinbaseWebSocket.CoinbaseWebSocketClient({symbols:coinbaseSymbols});const shutdown=__name(()=>{console.log(\"\\n\\u{1F6D1} Shutting down...\");coinbaseWS.disconnect();process.exit(0)},\"shutdown\");process.on(\"SIGINT\",shutdown);process.on(\"SIGTERM\",shutdown);function nowIso(){return new Date().toISOString()}__name(nowIso,\"nowIso\");function log(symbol,message){console.log(`[${new Date().toISOString()}][${symbol}] ${message}`)}__name(log,\"log\");function sideForDirection(direction,intent){if(intent===\"entry\"){return direction===\"long\"?\"buy\":\"sell\"}return direction===\"long\"?\"sell\":\"buy\"}__name(sideForDirection,\"sideForDirection\");async function waitForOrderFill(orderId,timeoutMs,cancelOnTimeout=true){const start=Date.now();while(Date.now()-start<timeoutMs){const order2=await(0,import_alpaca.getOrder)(orderId);const filledQty=Number(order2.filled_qty||\"0\");const avgPrice=Number(order2.filled_avg_price||\"0\");if(order2.status===\"filled\"){return{filledQty,avgPrice,status:order2.status}}if(order2.status===\"canceled\"||order2.status===\"rejected\"||order2.status===\"stopped\"||order2.status===\"suspended\"){return{filledQty,avgPrice,status:order2.status}}await(0,import_alpaca.sleep)(1e3)}if(cancelOnTimeout){try{await(0,import_alpaca.cancelOrder)(orderId)}catch(err){log(\"system\",`Cancel failed for ${orderId}: ${err.message}`)}}const order=await(0,import_alpaca.getOrder)(orderId);return{filledQty:Number(order.filled_qty||\"0\"),avgPrice:Number(order.filled_avg_price||\"0\"),status:order.status}}__name(waitForOrderFill,\"waitForOrderFill\");async function placeAdaptiveOrder(alpacaSymbol,side,quantity,mode,referencePrice){const quote=await(0,import_alpaca.fetchLatestQuote)(alpacaSymbol);if(!quote||!Number.isFinite(quote.ap)||!Number.isFinite(quote.bp)){log(alpacaSymbol,\"No quote available; skipping order\");return null}const spread=quote.ap-quote.bp;const spreadPct=spread/referencePrice;const throttle=mode!==\"exit-stop\"&&spreadPct>CONFIG.maxSpreadPct;if(throttle){log(alpacaSymbol,`Spread ${(spreadPct*100).toFixed(3)}% too wide; throttling ${mode}`);return null}let remaining=quantity;let attempt=0;let executedQty=0;let executedValue=0;while(remaining>0&&attempt<=CONFIG.walkRetries){const incrementPct=CONFIG.walkIncrementPct*attempt;const basePrice=side===\"buy\"?quote.ap:quote.bp;const limitPrice=side===\"buy\"?Number((basePrice*(1+incrementPct)).toFixed(2)):Number((basePrice*(1-incrementPct)).toFixed(2));const order=await(0,import_alpaca.submitOrder)({symbol:alpacaSymbol,side,qty:String(remaining.toFixed(8)),type:\"limit\",limit_price:limitPrice,time_in_force:\"gtc\",client_order_id:(0,import_crypto.randomUUID)()});const fill=await waitForOrderFill(order.id,CONFIG.walkTimeoutMs);executedQty+=fill.filledQty;executedValue+=fill.avgPrice*fill.filledQty;remaining-=fill.filledQty;if(remaining<=0){return{filledQty:executedQty,avgPrice:executedQty>0?executedValue/executedQty:fill.avgPrice,status:fill.status}}if(fill.status===\"rejected\"){log(alpacaSymbol,`Order rejected at limit ${limitPrice}; retrying with more aggressive price`)}else{try{await(0,import_alpaca.cancelOrder)(order.id)}catch(err){log(alpacaSymbol,`Cancel failed for ${order.id}: ${err.message}`)}}attempt+=1}if(remaining>0&&CONFIG.marketFallback){log(alpacaSymbol,`Falling back to market for ${remaining.toFixed(8)} (${mode})`);const order=await(0,import_alpaca.submitOrder)({symbol:alpacaSymbol,side,qty:String(remaining.toFixed(8)),type:\"market\",time_in_force:\"gtc\",client_order_id:(0,import_crypto.randomUUID)()});const fill=await waitForOrderFill(order.id,15e3,false);executedQty+=fill.filledQty;executedValue+=fill.avgPrice*fill.filledQty;remaining-=fill.filledQty}if(executedQty===0){log(alpacaSymbol,`No fill achieved for ${mode} order`);return null}return{filledQty:executedQty,avgPrice:executedValue/executedQty,status:remaining===0?\"filled\":\"partially_filled\"}}__name(placeAdaptiveOrder,\"placeAdaptiveOrder\");async function attemptEntry(coinbaseSymbol,alpacaSymbol,signal,referencePrice){const desiredQty=CONFIG.shareQuantity;if(desiredQty<=0)return;const direction=signal.direction===\"long\"?\"long\":\"short\";const side=sideForDirection(direction,\"entry\");log(coinbaseSymbol,`Attempting ${direction.toUpperCase()} entry @ $${referencePrice.toFixed(2)} for ${desiredQty} units`);const fill=await placeAdaptiveOrder(alpacaSymbol,side,desiredQty,\"entry\",referencePrice);if(!fill||fill.filledQty===0){log(coinbaseSymbol,\"Entry order not filled\");return}const actualQty=fill.filledQty;const trade={symbol:alpacaSymbol,coinbaseSymbol,direction,signal,entryPrice:fill.avgPrice,entryTime:nowIso(),stopLoss:signal.stopLoss,target:signal.target,scaled:false,totalQty:actualQty,remainingQty:actualQty,executedValue:fill.avgPrice*actualQty,units:actualQty>=.5?2:1};trades.set(coinbaseSymbol,trade);log(coinbaseSymbol,`Entered ${direction.toUpperCase()} position @ $${fill.avgPrice.toFixed(2)} (${actualQty.toFixed(4)} units)`)}__name(attemptEntry,\"attemptEntry\");async function scaleTrade(trade){if(trade.scaled||trade.units<2||trade.remainingQty<=.1){return}let scaleQty=trade.totalQty/2;if(scaleQty>=trade.remainingQty){scaleQty=Math.max(.1,trade.remainingQty-.1)}if(scaleQty<=0){return}const side=sideForDirection(trade.direction,\"exit\");log(trade.coinbaseSymbol,`Scaling out ${scaleQty.toFixed(4)} units at target $${trade.target?.toFixed(2)??\"n/a\"}`);const referencePrice=trade.target??trade.entryPrice;const fill=await placeAdaptiveOrder(trade.symbol,side,scaleQty,\"scale\",referencePrice);if(!fill||fill.filledQty===0){log(trade.coinbaseSymbol,\"Scale order not filled; retaining position\");return}trade.remainingQty=Math.max(0,trade.remainingQty-fill.filledQty);trade.scaled=true;trade.units=1;if(trade.direction===\"long\"){if(trade.target){trade.stopLoss=trade.target*.99;trade.target=(trade.signal.bbUpper??trade.target)*.99}}else{if(trade.target){trade.stopLoss=trade.target*1.01;trade.target=(trade.signal.bbLower??trade.target)*1.01}}log(trade.coinbaseSymbol,`Scaled position; remaining ${trade.remainingQty.toFixed(4)} units`)}__name(scaleTrade,\"scaleTrade\");async function exitTrade(trade,reason){if(trade.remainingQty<=0){trades.delete(trade.coinbaseSymbol);return}const side=sideForDirection(trade.direction,\"exit\");const referencePrice=trade.stopLoss??trade.target??trade.entryPrice;log(trade.coinbaseSymbol,`Closing position (${reason}) for ${trade.remainingQty.toFixed(4)} units`);const fill=await placeAdaptiveOrder(trade.symbol,side,trade.remainingQty,reason===\"stop\"?\"exit-stop\":\"exit-eod\",referencePrice);if(!fill||fill.filledQty===0){log(trade.coinbaseSymbol,\"Exit order failed; leaving trade open\");return}log(trade.coinbaseSymbol,`Exit filled (${reason}) avg $${fill.avgPrice.toFixed(2)} for ${fill.filledQty.toFixed(4)} units`);trades.delete(trade.coinbaseSymbol)}__name(exitTrade,\"exitTrade\");async function handleRealtimeTick(coinbaseSymbol,tick){const trade=trades.get(coinbaseSymbol);if(!trade||trade.processing){return}trade.processing=true;try{const price=tick.price;if(!trade.scaled&&typeof trade.target===\"number\"){const hitTarget=trade.direction===\"long\"&&price>=trade.target||trade.direction===\"short\"&&price<=trade.target;if(hitTarget){await scaleTrade(trade);return}}if(trade.stopLoss!==null){const hitStop=trade.direction===\"long\"&&price<=trade.stopLoss||trade.direction===\"short\"&&price>=trade.stopLoss;if(hitStop){await exitTrade(trade,\"stop\");return}}if(trade.units===1&&typeof trade.target===\"number\"){const finalTarget=trade.direction===\"long\"&&price>=trade.target||trade.direction===\"short\"&&price<=trade.target;if(finalTarget){await exitTrade(trade,\"target\")}}}catch(err){log(coinbaseSymbol,`Realtime handler error: ${err.message}`)}finally{const stillActive=trades.get(coinbaseSymbol);if(stillActive){stillActive.processing=false}}}__name(handleRealtimeTick,\"handleRealtimeTick\");async function processActiveTrade(trade){if(trade.processing){return}trade.processing=true;try{const position=await(0,import_alpaca.getPosition)(trade.symbol);if(!position||Number(position.qty)===0){trades.delete(trade.coinbaseSymbol);log(trade.coinbaseSymbol,\"Position closed externally; removing from tracker\");return}const brokerQty=Math.abs(Number(position.qty));trade.remainingQty=Math.min(trade.remainingQty,brokerQty)}finally{const stillActive=trades.get(trade.coinbaseSymbol);if(stillActive){stillActive.processing=false}}}__name(processActiveTrade,\"processActiveTrade\");async function processSymbol(coinbaseSymbol,alpacaSymbol){const bars=await coinbaseWS.getRecentBars(coinbaseSymbol,\"15Min\",40);if(bars.length<20){log(coinbaseSymbol,`Insufficient 15m bars (${bars.length}/20) for signal`);return}const latestBar=bars[bars.length-1];const barId=latestBar.t;const prevBar=lastProcessed15mBar.get(coinbaseSymbol);if(prevBar===barId){return}lastProcessed15mBar.set(coinbaseSymbol,barId);const closes=bars.map(b=>b.c);const price=latestBar.c;const signal=(0,import_meanReversionAgent.generateMeanReversionSignalFromTechnicals)(coinbaseSymbol,price,closes,1,{rsiPeriod:CONFIG.rsiPeriod,rsiOversold:CONFIG.rsiOversold,rsiOverbought:CONFIG.rsiOverbought,bbPeriod:CONFIG.bbPeriod,bbStdDev:CONFIG.bbStdDev,bbThreshold:CONFIG.bbThreshold,stopLossPercent:CONFIG.stopLossPercent});if(signal.direction===\"none\"){log(coinbaseSymbol,`No signal on latest bar @ $${price.toFixed(2)}`);return}if(trades.has(coinbaseSymbol)){log(coinbaseSymbol,\"Signal generated but trade already active; ignoring\");return}log(coinbaseSymbol,`\\u{1F6A8} ${signal.direction.toUpperCase()} signal: ${signal.rationale.join(\" | \")}`);await attemptEntry(coinbaseSymbol,alpacaSymbol,signal,price)}__name(processSymbol,\"processSymbol\");async function main(){console.log(\"\\u{1F680} Starting Live Crypto Mean Reversion Strategy\");console.log(`\\u{1F4CA} Market Data: Coinbase Public WebSocket`);console.log(`\\u{1F4BC} Order Execution: Alpaca Paper Trading`);console.log(`\\u{1F4B0} Symbols: ${coinbaseSymbols.join(\", \")}`);console.log(`\\u{1F4C8} Strategy: 2-unit scaling with RSI + Bollinger Bands\n`);console.log(\"Connecting to Coinbase WebSocket...\");coinbaseWS.connect();await(0,import_alpaca.sleep)(3e3);if(!coinbaseWS.connected()){console.error(\"\\u274C Failed to connect to Coinbase WebSocket\");return}console.log(\"\\u2705 Connected to Coinbase WebSocket\\n\");coinbaseWS.on(\"tick\",(symbol,tick)=>{handleRealtimeTick(symbol,tick).catch(err=>{log(symbol,`Tick handler error: ${err.message}`)})});while(true){try{for(const[coinbaseSymbol,alpacaSymbol]of Object.entries(CONFIG.symbols)){try{await processSymbol(coinbaseSymbol,alpacaSymbol);const trade=trades.get(coinbaseSymbol);if(trade){await processActiveTrade(trade)}}catch(err){log(coinbaseSymbol,`Error in processing: ${err.message}`)}}}catch(err){console.error(`[${nowIso()}] Fatal loop error`,err)}await(0,import_alpaca.sleep)(CONFIG.pollIntervalMs)}}__name(main,\"main\");main().catch(err=>{console.error(\"\\u274C Live strategy crashed:\",err);coinbaseWS.disconnect();process.exit(1)});\n})()\n","warnings":[],"map":{"version":3,"mappings":"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","names":["order"],"ignoreList":[],"sources":["/Users/coreycosta/trading-agent/run-live-crypto-mean-reversion.ts"],"sourcesContent":[null]}}